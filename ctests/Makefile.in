CC           = @CC@
CFLAGS       = @DEFS@ @PAPIPREP@ @THREADDEFS@ @CFLAGS@ @BITFLAGS@ @THREADFLAGS@
LDFLAGS      = @BITFLAGS@ @THREADFLAGS@ -L.. -lgptl @LDFLAGS@ @LIBS@
INSTRFLAGS   = @INSTRFLAGS@

OBJS = avail.o depth.o rawpapitest.o recursion.o stride.o \
       memusage.o utrtest.o papiomptest.o cygprofile.o cygprofilesubs.o 
EXES = avail depth     rawpapitest recursion stride \
       memusage utrtest papiomptest cygprofile

all: $(EXES)

clean:
	rm $(OBJS) $(EXES)

avail: avail.o
	$(CC) -o $@ avail.o $(LDFLAGS)

depth: depth.o
	$(CC) -o $@ depth.o $(LDFLAGS)

overhead: overhead.o
	$(CC) -o $@ overhead.o $(LDFLAGS)

rawpapitest: rawpapitest.o
	$(CC) -o $@ rawpapitest.o $(LDFLAGS)

recursion: recursion.o
	$(CC) -o $@ recursion.o $(LDFLAGS)

exception: exception.o
	$(CC) -o $@ exception.o $(LDFLAGS)

memusage: memusage.o
	$(CC) -o $@ memusage.o $(LDFLAGS)

utrtest: utrtest.o
	$(CC) -o $@ utrtest.o $(LDFLAGS)

papiomptest: papiomptest.o
	$(CC) $(THREADFLAGS) -o $@ papiomptest.o $(LDFLAGS)

cygprofile: cygprofile.o cygprofilesubs.o
	$(CC) -o $@ cygprofile.o cygprofilesubs.o $(LDFLAGS)
cygprofilesubs.o: cygprofilesubs.c
	$(CC) -c $(INSTRFLAGS) -o $@ $<

stride: stride.o
	$(CC) -o $@ stride.o $(LDFLAGS)
