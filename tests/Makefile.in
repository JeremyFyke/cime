CC       = @CC@
CFLAGS   = @CFLAGS@
FC       = @F77@
FFLAGS   = @FFLAGS@
LDFLAGS  = -L.. -lgpt @LIBS@ @LDFLAGS@ $(CFLAGS) -lefence
FLDFLAGS = -L.. -lgpt -lefence
LOADER = @F77@

COBJS = exp.o timetiming.o llcost.o depth.o
CEXES = exp   timetiming   llcost   depth

FOBJS = cheap.o expensive.o flopsperclock.o omptest.o errtest.o overhead.o opscost.o \
        hashtest.o
FEXES = cheap   expensive   flopsperclock   omptest   errtest   overhead   opscost \
        hashtest

all: $(CEXES) $(FEXES)
cexes: $(CEXES)
fexes: $(FEXES)

exp: exp.o
	$(CC) -o $@ exp.o $(CFLAGS) $(LDFLAGS) -lm

timetiming: timetiming.o
	$(CC) -o $@ timetiming.o $(CFLAGS) $(LDFLAGS) -lm

llcost: llcost.o
	$(CC) -o $@ llcost.o $(CFLAGS) $(LDFLAGS)

depth: depth.o
	$(CC) -o $@ depth.o $(CFLAGS) $(LDFLAGS)

cheap: cheap.o
	$(LOADER) -o $@ cheap.o $(FFLAGS) $(FLDFLAGS)

expensive: expensive.o
	$(LOADER) -o $@ expensive.o $(FFLAGS) $(FLDFLAGS)

flopsperclock: flopsperclock.o
	$(LOADER) -o $@ flopsperclock.o $(FFLAGS) $(FLDFLAGS)

omptest: omptest.o
	$(LOADER) -o $@ omptest.o $(FFLAGS) $(FLDFLAGS)

errtest: errtest.o
	$(LOADER) -o $@ errtest.o $(FFLAGS) $(FLDFLAGS)

overhead: overhead.o
	$(LOADER) -o $@ overhead.o $(FFLAGS) $(FLDFLAGS)

opscost: opscost.o
	$(LOADER) -o $@ opscost.o $(FFLAGS) $(FLDFLAGS)

hashtest: hashtest.o
	$(LOADER) -o $@ hashtest.o $(FFLAGS) $(FLDFLAGS)

clean:
	$(RM) $(FOBJS) $(COBJS) $(FEXES) $(CEXES)
