CC       = @CC@
CFLAGS   = @CFLAGS@
FC       = @F77@
FFLAGS   = @FFLAGS@
LDFLAGS  = -L.. -lgpt @LIBS@ @LDFLAGS@ $(CFLAGS)
FLDFLAGS = -L.. -lgpt
LOADER = @F77@

OBJS1 = cheap.o
OBJS2 = exp.o
OBJS3 = expensive.o
OBJS4 = timetiming.o
OBJS5 = flopsperclock.o
OBJS6 = omptest.o
OBJS7 = errtest.o
OBJS8 = overhead.o
OBJS9 = opscost.o

CEXES = exp timetiming 
FEXES = cheap expensive flopsperclock omptest errtest overhead opscost

all: $(CEXES) $(FEXES)

cexes: $(CEXES)

fexes: $(FEXES)

exp: $(OBJS2)
	$(CC) -o $@ $(OBJS2) $(CCFLAGS) $(LDFLAGS) -lm

timetiming: $(OBJS4)
	$(CC) -o $@ $(OBJS4) $(CCFLAGS) $(LDFLAGS) -lm

cheap: $(OBJS1)
	$(LOADER) -o $@ $(OBJS1) $(FFLAGS) $(FLDFLAGS)

expensive: $(OBJS3)
	$(LOADER) -o $@ $(OBJS3) $(FFLAGS) $(FLDFLAGS)

flopsperclock: $(OBJS5)
	$(LOADER) -o $@ $(OBJS5) $(FFLAGS) $(FLDFLAGS)

omptest: $(OBJS6)
	$(LOADER) -o $@ $(OBJS6) $(FFLAGS) $(FLDFLAGS)

errtest: $(OBJS7)
	$(LOADER) -o $@ $(OBJS7) $(FFLAGS) $(FLDFLAGS)

overhead: $(OBJS8)
	$(LOADER) -o $@ $(OBJS8) $(FFLAGS) $(FLDFLAGS)

opscost: $(OBJS9)
	$(LOADER) -o $@ $(OBJS9) $(FFLAGS) $(FLDFLAGS)

clean:
	$(RM) $(OBJS1) $(OBJS2) $(OBJS3) $(OBJS4) $(OBJS5) $(OBJS6) $(OBJS7) $(OBJS8) $(OBJS9) $(EXES)
